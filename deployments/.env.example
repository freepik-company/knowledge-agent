# Knowledge Agent Docker Environment Variables
# Copy this file to .env and fill in your values:
# cp deployments/.env.example deployments/.env

# =============================================================================
# REQUIRED: Anthropic API
# =============================================================================
# Get your API key from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=sk-ant-api03-xxxxx
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929

# =============================================================================
# REQUIRED: Slack Configuration
# =============================================================================
# Get these from: https://api.slack.com/apps → Your App
SLACK_BOT_TOKEN=xoxb-xxxxx
SLACK_SIGNING_SECRET=xxxxx
# For socket mode (development):
SLACK_APP_TOKEN=xapp-xxxxx
# Mode: "socket" (dev) or "webhook" (prod)
SLACK_MODE=socket

# =============================================================================
# Database Configuration (Docker internal)
# =============================================================================
# These are pre-configured for Docker Compose - don't change unless needed
POSTGRES_URL=postgres://postgres:postgres@postgres:5432/knowledge_agent?sslmode=disable
REDIS_ADDR=redis:6379
OLLAMA_BASE_URL=http://ollama:11434/v1

# =============================================================================
# Authentication & Security
# =============================================================================
# Internal token for Slack Bridge → Agent communication
# Generate with: openssl rand -hex 32
INTERNAL_AUTH_TOKEN=your-secret-token-here

# API Key Authentication (JSON format)
# Maps secret_key to config: {"secret":{"caller_id":"name","role":"write|read"}}
# Legacy format also supported: {"secret":"caller_id"} (assumes role="write")
# Example (new format): {"ka_secret_root":{"caller_id":"root-agent","role":"write"}}
# Example (legacy): {"ka_rootagent":"root-agent"}
API_KEYS={"ka_rootagent":"root-agent"}

# =============================================================================
# Langfuse Observability (Optional)
# =============================================================================
# Enable to track LLM usage, costs, and performance
# Sign up at: https://cloud.langfuse.com
LANGFUSE_ENABLED=false
LANGFUSE_PUBLIC_KEY=pk-lf-xxxxx
LANGFUSE_SECRET_KEY=sk-lf-xxxxx
LANGFUSE_HOST=https://cloud.langfuse.com

# =============================================================================
# MCP Integration (Optional)
# =============================================================================
# GitHub Personal Access Token (for GitHub MCP)
# Get from: https://github.com/settings/tokens
# GITHUB_PAT=ghp_xxxxx

# =============================================================================
# Server Configuration (Advanced)
# =============================================================================
# HTTP timeouts (seconds)
SERVER_READ_TIMEOUT=30
SERVER_WRITE_TIMEOUT=180
SERVER_REQUEST_TIMEOUT=120

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout

# Ports (don't change unless you have conflicts)
AGENT_PORT=8081
SLACK_BOT_PORT=8080

# =============================================================================
# Permissions (Optional)
# =============================================================================
# Comma-separated list of Slack User IDs allowed to save to memory
# Get user ID: Slack → Profile → More → Copy member ID
# ALLOWED_SLACK_USERS=U074TAU31NK,U01ABC123

# Comma-separated list of caller IDs with admin permissions
# ADMIN_CALLER_IDS=root-agent,monitoring
